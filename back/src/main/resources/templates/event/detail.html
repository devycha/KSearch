<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Event Detail</title>
</head>
<body>
    <h2 th:text="${event.title}">Event Title</h2>
    <p th:text="${event.description}">Event Description</p>
    <p th:text="'Deadline: ' + ${event.deadline}">Deadline</p>
    <p th:text="'Amount: ' + ${event.amount}">Amount</p>
    <p th:text="'Rest: ' + ${event.rest}">Rest</p>
    <p th:text="'Author: ' + ${event.author}">Author</p>
    <div>
        <button onclick="sendParticipateRequest()" class="participate-btn" type="submit">신청하기</button>
    </div>
<script th:inline="javascript">
    function sendParticipateRequest() {
        const eventId = /*[[${event.id}]]*/ 0;

        if (eventId <= 0) {
            alert("알 수 없는 오류 발생.")
        }

        const url = `/event/${eventId}/participate`

        fetch(url, {
            method: "POST"
        }).then(res => {
            if (res) {
                alert("성공적으로 이벤트 등록을 완료했습니다.")
            } else {
                alert("이벤트 등록에 실패하였습니다.")
            }
        });
    }
</script>

</body>
</html>
